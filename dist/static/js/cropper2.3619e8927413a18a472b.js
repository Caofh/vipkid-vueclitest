webpackJsonp([5],{"5OHe":function(t,e){},Dcy1:function(t,e,o){"use strict";var n=o("lC5x"),r=o.n(n),i=o("J0Oq"),a=o.n(i),c=o("rVsN"),u=o.n(c),p=o("aozt"),s=o.n(p),f=o("tgrj"),d=o("s9Ai");function v(t){var e="http://upload.qiniu.com/putb64/-1/key/"+t.path,o={};return(o=s.a.create({timeout:1e4,headers:{"Content-Type":t.contentType,Authorization:t.authorization}})).interceptors.request.use(function(t){return t},function(t){return u.a.reject(t)}),o.interceptors.response.use(function(t){return t.data},function(t){var e=t;return u.a.reject(e)}),o.post(e,t.dataURL)}var l={name:"App",props:["beforeCrop","uploadSuccess","cropClick","boxMoveSuccess","option"],data:function(){return{imgAddress:""}},components:{VueCropper:f.VueCropper},created:function(){},mounted:function(){console.log(window["vue-cropper"])},methods:{changeFile:function(t){var e=this,o=t.target.files[0];"false"!=String(this.beforeCrop(o))&&this.imgToBase64(o).then(function(t){var o=t.target.result;e.option.img=o,e.$refs.imgUpload.value=""})},cropButton:function(){var t=this;this.getCropBase64().then(function(e){var o={imgUrl:e,imgWidth:t.$refs.cropper.cropW,imgHeight:t.$refs.cropper.cropH};t.cropClick&&t.cropClick(o),t.uploadSuccess&&t.uploadQiNiu(e)})},uploadQiNiu:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return a()(r.a.mark(function o(){var n,i,a,c,u,p,s,f,l,h,g;return r.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return n=(new Date).getTime(),i="teacher_abc_text/image/183455/detail/183455_detail_"+n,o.prev=2,o.next=5,Object(d.a)(i);case 5:return a=o.sent,c=a.token,u=window.btoa(i.split(".").pop()),p=e.replace(/^data[\S]+;base64,/,""),s={path:u,dataURL:p,contentType:"application/octet-stream",authorization:"UpToken "+c},o.prev=10,o.next=13,v(s);case 13:f=o.sent,l=f.key||"",h=t.getCloudUrl(l),g={imgUrl:h,imgWidth:t.$refs.cropper.cropW,imgHeight:t.$refs.cropper.cropH},t.uploadSuccess&&t.uploadSuccess(g),o.next=23;break;case 20:o.prev=20,o.t0=o.catch(10),console.log(o.t0);case 23:o.next=28;break;case 25:o.prev=25,o.t1=o.catch(2),console.log(o.t1);case 28:case"end":return o.stop()}},o,t,[[2,25],[10,20]])}))()},getCropBase64:function(){var t=this;return new u.a(function(e,o){t.$refs.cropper.getCropData(function(t){e(t)})})},getCloudUrl:function(){return"http://file.sayabc.com/"+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")},boxMove:function(t){var e={e:t,boxWidth:this.$refs.cropper.cropW,boxHeight:this.$refs.cropper.cropH};this.boxMoveSuccess&&this.boxMoveSuccess(e)},imgToBase64:function(t){return new u.a(function(e,o){var n=new FileReader;n.readAsDataURL(t),n.onload=function(t){e(t)}})}}},h={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("div",[t._v('基于vue的图片裁剪插件-"vue-image-crop-upload"调研')]),t._v(" "),o("br"),t._v(" "),o("br"),t._v(" "),o("br"),t._v(" "),o("div",{attrs:{id:"crop2"}},[o("p",[t._v("例子")]),t._v(" "),o("div",{staticClass:"cut"},[o("vue-cropper",{ref:"cropper",attrs:{img:t.option.img,fixed:t.option.fixed,"output-size":t.option.size,"output-type":t.option.outputType,info:!0,full:t.option.full,"can-move":t.option.canMove,"can-move-box":t.option.canMoveBox,"fixed-box":t.option.fixedBox,original:t.option.original,"auto-crop":t.option.autoCrop,"auto-crop-width":t.option.autoCropWidth,"auto-crop-height":t.option.autoCropHeight,"center-box":t.option.centerBox,high:t.option.high},on:{cropMoving:t.boxMove}})],1)]),t._v(" "),o("br"),t._v(" "),o("br"),t._v(" "),o("br"),t._v(" "),o("div",[t._v("\n        上传图片\n        "),o("input",{ref:"imgUpload",attrs:{type:"file"},on:{change:function(e){t.changeFile(e)}}})]),t._v(" "),o("div",{on:{click:t.cropButton}},[t._v("\n        裁剪图片\n    ")])])},staticRenderFns:[]};var g=o("C7Lr")(l,h,!1,function(t){o("XWeY")},"data-v-3e85e6d6",null);e.a=g.exports},L8d8:function(t,e,o){"use strict";var n=o("rVsN"),r=o.n(n),i=o("aozt"),a=o.n(i);o("9k1S");e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",e={};return(e=a.a.create({baseURL:t,timeout:1e4})).interceptors.request.use(function(t){return t},function(t){return r.a.reject(t)}),e.interceptors.response.use(function(t){return t.data},function(t){var e=t;return r.a.reject(e)}),e},o.d(e,"b",function(){return c});var c=function(t){var e=new FormData;for(var o in t)e.append(o,t[o]);return e}},XWeY:function(t,e){},g6mz:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("5OHe"),r=(o.n(n),o("bghU")),i=o.n(r),a=o("IvJb"),c=o("Dcy1");a.default.use(i.a),a.default.config.productionTip=!1,new a.default({el:"#app",components:{App:c.a},template:"<App/>"})},s9Ai:function(t,e,o){"use strict";e.a=function(t){return u.get("/uploader-dev-9098/api/v1/qiniu/upload/token?"+t)},e.b=function(t){var e="http://upload.qiniu.com/putb64/-1/key/"+t.path,o={};return(o=c.a.create({timeout:1e4,headers:{"Content-Type":t.contentType,Authorization:t.authorization}})).interceptors.request.use(function(t){return t},function(t){return r.a.reject(t)}),o.interceptors.response.use(function(t){return t.data},function(t){var e=t;return r.a.reject(e)}),o.post(e,t.dataURL)};var n=o("rVsN"),r=o.n(n),i=o("L8d8"),a=o("aozt"),c=o.n(a),u=Object(i.a)("http://gateway-dev.sayabc.com:8000")}},["g6mz"]);
//# sourceMappingURL=cropper2.3619e8927413a18a472b.js.map