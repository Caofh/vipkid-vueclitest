webpackJsonp([6],{"1oKP":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});i("5OHe");var o=i("bghU"),a=i.n(o),n=i("IvJb"),s=i("hRKE"),r=i.n(s),c=i("rVsN"),p=i.n(c),l=i("lC5x"),u=i.n(l),h=i("J0Oq"),v=i.n(h),d=(i("N7LD"),i("briU"),i("ZLEe")),g=i.n(d),m=i("aA9S"),f=i.n(m),w=i("dmtU"),_=i("qLWu"),y=i("TXwb"),x=i("5Qu8"),b={props:{field:{type:String,default:"avatar"},ki:{default:0},value:{default:!0},url:{type:String,default:""},params:{type:Object,default:null},headers:{type:Object,default:null},width:{type:Number,default:200},height:{type:Number,default:200},noRotate:{type:Boolean,default:!0},noCircle:{type:Boolean,default:!1},noSquare:{type:Boolean,default:!1},maxSize:{type:Number,default:10240},langType:{type:String,default:"zh"},langExt:{type:Object,default:null},imgFormat:{type:String,default:"png"},imgBgc:{type:String,default:"#fff"},withCredentials:{type:Boolean,default:!1},method:{type:String,default:"POST"}},data:function(){var t=this.imgFormat,e=this.langType,i=this.langExt,o=this.width,a=this.height,n=!0,s=-1===["jpg","png"].indexOf(t)?"jpg":t,r=w.a[e]?w.a[e]:w.a.en,c=_.a[s];return this.imgFormat=s,i&&f()(r,i),"function"!=typeof FormData&&(n=!1),{mime:c,lang:r,isSupported:n,isSupportTouch:document.hasOwnProperty("ontouchstart"),step:1,loading:0,progress:0,hasError:!1,errorMsg:"",ratio:o/a,sourceImg:null,sourceImgUrl:"",createImgUrl:"",sourceImgMouseDown:{on:!1,mX:0,mY:0,x:0,y:0},previewContainer:{width:100,height:100},sourceImgContainer:{width:240,height:184},scale:{zoomAddOn:!1,zoomSubOn:!1,range:1,x:0,y:0,width:0,height:0,maxWidth:0,maxHeight:0,minWidth:0,minHeight:0,naturalWidth:0,naturalHeight:0}}},computed:{progressStyle:function(){return{width:this.progress+"%"}},sourceImgStyle:function(){var t=this.scale,e=this.sourceImgMasking;return{top:t.y+e.y+"px",left:t.x+e.x+"px",width:t.width+"px",height:t.height+"px"}},sourceImgMasking:function(){var t=this.width,e=this.height,i=this.ratio,o=this.sourceImgContainer,a=o.width/o.height,n=0,s=0,r=o.width,c=o.height,p=1;return i<a&&(p=o.height/e,r=o.height*i,n=(o.width-r)/2),i>a&&(p=o.width/t,c=o.width/i,s=(o.height-c)/2),{scale:p,x:n,y:s,width:r,height:c}},sourceImgShadeStyle:function(){var t=this.sourceImgMasking,e=this.sourceImgContainer,i=t;return{width:(i.width==e.width?i.width:(e.width-i.width)/2)+"px",height:(i.height==e.height?i.height:(e.height-i.height)/2)+"px"}},previewStyle:function(){this.width,this.height;var t=this.ratio,e=this.previewContainer,i=e.width,o=e.height,a=i/o;return t<a&&(i=e.height*t),t>a&&(o=e.width/t),{width:i+"px",height:o+"px"}}},watch:{value:function(t){t&&1!=this.loading&&this.reset()}},methods:{ripple:function(t){Object(x.a)(t)},off:function(){var t=this;setTimeout(function(){t.$emit("input",!1),3==t.step&&2==t.loading&&t.setStep(1)},200)},setStep:function(t){var e=this;setTimeout(function(){e.step=t},200)},preventDefault:function(t){return t.preventDefault(),!1},handleClick:function(t){1!==this.loading&&t.target!==this.$refs.fileinput&&(t.preventDefault(),document.activeElement!==this.$refs&&this.$refs.fileinput.click())},handleChange:function(t){if(t.preventDefault(),1!==this.loading){var e=t.target.files||t.dataTransfer.files;this.reset(),this.checkFile(e[0])&&this.setSourceImg(e[0])}},checkFile:function(t){var e=this.lang,i=this.maxSize;return-1===t.type.indexOf("image")?(this.hasError=!0,this.errorMsg=e.error.onlyImg,!1):!(t.size/1024>i)||(this.hasError=!0,this.errorMsg=e.error.outOfSize+i+"kb",!1)},reset:function(){this.loading=0,this.hasError=!1,this.errorMsg="",this.progress=0},setSourceImg:function(t){this.$emit("src-file-set",t.name,t.type,t.size);var e=this,i=new FileReader;i.onload=function(t){e.sourceImgUrl=i.result,e.startCrop()},i.readAsDataURL(t)},startCrop:function(){var t=this,e=t.width,i=t.height,o=t.ratio,a=t.scale,n=t.sourceImgUrl,s=t.sourceImgMasking,r=t.lang,c=s,p=new Image;p.src=n,p.onload=function(){var n=p.naturalWidth,s=p.naturalHeight,l=n/s,u=c.width,h=c.height,v=0,d=0;if(n<e||s<i)return t.hasError=!0,t.errorMsg=r.error.lowestPx+e+"*"+i,!1;o>l&&(h=u/l,d=(c.height-h)/2),o<l&&(u=h*l,v=(c.width-u)/2),a.range=0,a.x=v,a.y=d,a.width=u,a.height=h,a.minWidth=u,a.minHeight=h,a.maxWidth=n*c.scale,a.maxHeight=s*c.scale,a.naturalWidth=n,a.naturalHeight=s,t.sourceImg=p,t.createImg(),t.setStep(2)}},imgStartMove:function(t){if(t.preventDefault(),this.isSupportTouch&&!t.targetTouches)return!1;var e=t.targetTouches?t.targetTouches[0]:t,i=this.sourceImgMouseDown,o=this.scale,a=i;a.mX=e.screenX,a.mY=e.screenY,a.x=o.x,a.y=o.y,a.on=!0},imgMove:function(t){if(t.preventDefault(),this.isSupportTouch&&!t.targetTouches)return!1;var e=t.targetTouches?t.targetTouches[0]:t,i=this.sourceImgMouseDown,o=i.on,a=i.mX,n=i.mY,s=i.x,r=i.y,c=this.scale,p=this.sourceImgMasking,l=s+(e.screenX-a),u=r+(e.screenY-n);o&&(l>0&&(l=0),u>0&&(u=0),l<p.width-c.width&&(l=p.width-c.width),u<p.height-c.height&&(u=p.height-c.height),c.x=l,c.y=u)},rotateImg:function(t){var e=this.sourceImg,i=this.scale,o=i.naturalWidth,a=i.naturalHeight,n=a,s=o,r=this.$refs.canvas,c=r.getContext("2d");r.width=n,r.height=s,c.clearRect(0,0,n,s),c.fillStyle="rgba(0,0,0,0)",c.fillRect(0,0,n,s),c.translate(n,0),c.rotate(90*Math.PI/180),c.drawImage(e,0,0,o,a);var p=r.toDataURL(_.a.png);this.sourceImgUrl=p,this.startCrop()},startZoomAdd:function(t){var e=this,i=e.scale;i.zoomAddOn=!0,function t(){if(i.zoomAddOn){var o=i.range>=100?100:++i.range;e.zoomImg(o),setTimeout(function(){t()},60)}}()},endZoomAdd:function(t){this.scale.zoomAddOn=!1},startZoomSub:function(t){var e=this,i=e.scale;i.zoomSubOn=!0,function t(){if(i.zoomSubOn){var o=i.range<=0?0:--i.range;e.zoomImg(o),setTimeout(function(){t()},60)}}()},endZoomSub:function(t){this.scale.zoomSubOn=!1},zoomChange:function(t){this.zoomImg(t.target.value)},zoomImg:function(t){var e=this,i=this.sourceImgMasking,o=(this.sourceImgMouseDown,this.scale),a=o.maxWidth,n=o.maxHeight,s=o.minWidth,r=o.minHeight,c=o.width,p=o.height,l=o.x,u=o.y,h=(o.range,i),v=h.width,d=h.height,g=s+(a-s)*t/100,m=r+(n-r)*t/100,f=v/2-g/c*(v/2-l),w=d/2-m/p*(d/2-u);f>0&&(f=0),w>0&&(w=0),f<v-g&&(f=v-g),w<d-m&&(w=d-m),o.x=f,o.y=w,o.width=g,o.height=m,o.range=t,setTimeout(function(){o.range==t&&e.createImg()},300)},createImg:function(t){var e=this.imgFormat,i=this.imgBgc,o=this.mime,a=this.sourceImg,n=this.scale,s=n.x,r=n.y,c=n.width,p=n.height,l=this.sourceImgMasking.scale,u=this.$refs.canvas,h=u.getContext("2d");t&&(this.sourceImgMouseDown.on=!1),u.width=this.width,u.height=this.height,h.clearRect(0,0,this.width,this.height),h.fillStyle="png"==e?"rgba(0,0,0,0)":i,h.fillRect(0,0,this.width,this.height),h.drawImage(a,s/l,r/l,c/l,p/l),this.createImgUrl=u.toDataURL(o)},prepareUpload:function(){var t=this.url,e=this.createImgUrl,i=this.field,o=this.ki;this.$emit("crop-success",e,i,o),"string"==typeof t&&t?this.upload():this.off()},upload:function(){var t=this,e=this.lang,i=this.imgFormat,o=this.mime,a=this.url,n=this.params,s=this.headers,c=this.field,l=this.ki,u=this.createImgUrl,h=this.withCredentials,v=this.method,d=new FormData;d.append(c,Object(y.a)(u,o),c+"."+i),"object"==(void 0===n?"undefined":r()(n))&&n&&g()(n).forEach(function(t){d.append(t,n[t])});var m=function(e){e.lengthComputable&&(t.progress=100*Math.round(e.loaded)/e.total)};t.reset(),t.loading=1,t.setStep(3),new p.a(function(t,e){var i=new XMLHttpRequest;i.open(v,a,!0),i.withCredentials=h,i.onreadystatechange=function(){4===this.readyState&&(200===this.status||201===this.status?t(JSON.parse(this.responseText)):e(this.status))},i.upload.addEventListener("progress",m,!1),"object"==(void 0===s?"undefined":r()(s))&&s&&g()(s).forEach(function(t){i.setRequestHeader(t,s[t])}),i.send(d)}).then(function(e){t.value&&(t.loading=2,t.$emit("crop-upload-success",e,c,l))},function(i){t.value&&(t.loading=3,t.hasError=!0,t.errorMsg=e.fail,t.$emit("crop-upload-fail",i,c,l))})}},created:function(){var t=this;document.addEventListener("keyup",function(e){!t.value||"Escape"!=e.key&&27!=e.keyCode||t.off()})}},C={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.value,expression:"value"}],staticClass:"vue-image-crop-upload"},[i("div",{staticClass:"vicp-wrap"},[i("div",{staticClass:"vicp-close",on:{click:t.off}},[i("i",{staticClass:"vicp-icon4"})]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:1==t.step,expression:"step == 1"}],staticClass:"vicp-step1"},[i("div",{staticClass:"vicp-drop-area",on:{dragleave:t.preventDefault,dragover:t.preventDefault,dragenter:t.preventDefault,click:t.handleClick,drop:t.handleChange}},[i("i",{directives:[{name:"show",rawName:"v-show",value:1!=t.loading,expression:"loading != 1"}],staticClass:"vicp-icon1"},[i("i",{staticClass:"vicp-icon1-arrow"}),t._v(" "),i("i",{staticClass:"vicp-icon1-body"}),t._v(" "),i("i",{staticClass:"vicp-icon1-bottom"})]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:1!==t.loading,expression:"loading !== 1"}],staticClass:"vicp-hint"},[t._v(t._s(t.lang.hint))]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:!t.isSupported,expression:"!isSupported"}],staticClass:"vicp-no-supported-hint"},[t._v(t._s(t.lang.noSupported))]),t._v(" "),1==t.step?i("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"fileinput",attrs:{type:"file"},on:{change:t.handleChange}}):t._e()]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.hasError,expression:"hasError"}],staticClass:"vicp-error"},[i("i",{staticClass:"vicp-icon2"}),t._v(" "+t._s(t.errorMsg)+"\r\n\t\t\t")]),t._v(" "),i("div",{staticClass:"vicp-operate"},[i("a",{on:{click:t.off,mousedown:t.ripple}},[t._v(t._s(t.lang.btn.off))])])]),t._v(" "),2==t.step?i("div",{staticClass:"vicp-step2"},[i("div",{staticClass:"vicp-crop"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"vicp-crop-left"},[i("div",{staticClass:"vicp-img-container"},[i("img",{ref:"img",staticClass:"vicp-img",style:t.sourceImgStyle,attrs:{src:t.sourceImgUrl,draggable:"false"},on:{drag:t.preventDefault,dragstart:t.preventDefault,dragend:t.preventDefault,dragleave:t.preventDefault,dragover:t.preventDefault,dragenter:t.preventDefault,drop:t.preventDefault,touchstart:t.imgStartMove,touchmove:t.imgMove,touchend:t.createImg,touchcancel:t.createImg,mousedown:t.imgStartMove,mousemove:t.imgMove,mouseup:t.createImg,mouseout:t.createImg}}),t._v(" "),i("div",{staticClass:"vicp-img-shade vicp-img-shade-1",style:t.sourceImgShadeStyle}),t._v(" "),i("div",{staticClass:"vicp-img-shade vicp-img-shade-2",style:t.sourceImgShadeStyle})]),t._v(" "),i("div",{staticClass:"vicp-range"},[i("input",{attrs:{type:"range",step:"1",min:"0",max:"100"},domProps:{value:t.scale.range},on:{mousemove:t.zoomChange}}),t._v(" "),i("i",{staticClass:"vicp-icon5",on:{mousedown:t.startZoomSub,mouseout:t.endZoomSub,mouseup:t.endZoomSub}}),t._v(" "),i("i",{staticClass:"vicp-icon6",on:{mousedown:t.startZoomAdd,mouseout:t.endZoomAdd,mouseup:t.endZoomAdd}})]),t._v(" "),t.noRotate?t._e():i("div",{staticClass:"vicp-rotate"},[i("i",{on:{click:t.rotateImg}},[t._v("↻")])])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"vicp-crop-right"},[i("div",{staticClass:"vicp-preview"},[t.noSquare?t._e():i("div",{staticClass:"vicp-preview-item"},[i("img",{style:t.previewStyle,attrs:{src:t.createImgUrl}}),t._v(" "),i("span",[t._v(t._s(t.lang.preview))])]),t._v(" "),t.noCircle?t._e():i("div",{staticClass:"vicp-preview-item vicp-preview-item-circle"},[i("img",{style:t.previewStyle,attrs:{src:t.createImgUrl}}),t._v(" "),i("span",[t._v(t._s(t.lang.preview))])])])])]),t._v(" "),i("div",{staticClass:"vicp-operate"},[i("a",{on:{click:function(e){t.setStep(1)},mousedown:t.ripple}},[t._v(t._s(t.lang.btn.back))]),t._v(" "),i("a",{staticClass:"vicp-operate-btn",on:{click:t.prepareUpload,mousedown:t.ripple}},[t._v(t._s(t.lang.btn.save))])])]):t._e(),t._v(" "),3==t.step?i("div",{staticClass:"vicp-step3"},[i("div",{staticClass:"vicp-upload"},[i("span",{directives:[{name:"show",rawName:"v-show",value:1===t.loading,expression:"loading === 1"}],staticClass:"vicp-loading"},[t._v(t._s(t.lang.loading))]),t._v(" "),i("div",{staticClass:"vicp-progress-wrap"},[i("span",{directives:[{name:"show",rawName:"v-show",value:1===t.loading,expression:"loading === 1"}],staticClass:"vicp-progress",style:t.progressStyle})]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.hasError,expression:"hasError"}],staticClass:"vicp-error"},[i("i",{staticClass:"vicp-icon2"}),t._v(" "+t._s(t.errorMsg)+"\r\n\t\t\t\t")]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2===t.loading,expression:"loading === 2"}],staticClass:"vicp-success"},[i("i",{staticClass:"vicp-icon3"}),t._v(" "+t._s(t.lang.success)+"\r\n\t\t\t\t")])]),t._v(" "),i("div",{staticClass:"vicp-operate"},[i("a",{on:{click:function(e){t.setStep(2)},mousedown:t.ripple}},[t._v(t._s(t.lang.btn.back))]),t._v(" "),i("a",{on:{click:t.off,mousedown:t.ripple}},[t._v(t._s(t.lang.btn.close))])])]):t._e(),t._v(" "),i("canvas",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"canvas",attrs:{width:t.width,height:t.height}})])])},staticRenderFns:[]};var k=i("C7Lr")(b,C,!1,function(t){i("OPLz")},null,null).exports,S=i("tgrj"),I=i("s9Ai"),B={init:function(){},imgToBase64:function(t){return new p.a(function(e,i){var o=new FileReader;o.readAsDataURL(t),o.onload=function(t){e(t)}})}},M={name:"App",data:function(){return{imgAddress:"",model:!1,modelSrc:"",crap:!1,previews:{},lists:[{img:"https://tpdoc.cn/uploads/dream/jianzhu.png"}],option:{img:"",size:1,full:!1,outputType:"png",canMove:!0,fixedBox:!1,original:!1,canMoveBox:!0,autoCrop:!0,autoCropWidth:200,autoCropHeight:150,centerBox:!1,high:!0},show:!0}},components:{"my-upload":k,VueCropper:S.VueCropper},created:function(){},mounted:function(){var t=this;return v()(u.a.mark(function e(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log(window["vue-cropper"]);case 1:case"end":return t.stop()}},e,t)}))()},methods:{cropButton:function(){var t=this;this.getCropBase64().then(function(e){console.log(e),t.uploadQiNiu(e)})},getCropBase64:function(){var t=this;return new p.a(function(e,i){t.$refs.cropper.getCropData(function(t){e(t)})})},uploadQiNiu:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return v()(u.a.mark(function i(){var o,a,n,s,r,c,p,l,h;return u.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return o=(new Date).getTime(),a="teacher_abc_text/image/183455/detail/183455_detail_"+o,i.next=4,Object(I.a)(a);case 4:return n=i.sent,s=n.token,r=window.btoa(a.split(".").pop()),c=e.replace(/^data[\S]+;base64,/,""),p={path:r,dataURL:c,contentType:"application/octet-stream",authorization:"UpToken "+s},i.next=11,Object(I.b)(p);case 11:l=i.sent,h=l.key||"",t.getCloudUrl(h),console.log(l);case 15:case"end":return i.stop()}},i,t)}))()},getCloudUrl:function(){return"http://file.sayabc.com/"+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")},changeFile:function(t){var e=this,i=t.target.files[0];B.imgToBase64(i).then(function(t){var i=t.target.result;e.option.img=i,e.$refs.imgUpload.value=""})},changeImg:function(){this.option.img=this.lists[~~(Math.random()*this.lists.length)].img},startCrop:function(){this.crap=!0,this.$refs.cropper.startCrop()},stopCrop:function(){this.crap=!1,this.$refs.cropper.stopCrop()},clearCrop:function(){this.$refs.cropper.clearCrop()},refreshCrop:function(){this.$refs.cropper.refresh()},changeScale:function(t){t=t||1,this.$refs.cropper.changeScale(t)},rotateLeft:function(){this.$refs.cropper.rotateLeft()},rotateRight:function(){this.$refs.cropper.rotateRight()},finish:function(t){var e=this;"blob"===t?this.$refs.cropper.getCropBlob(function(t){var i=window.URL.createObjectURL(t);e.model=!0,e.modelSrc=i}):this.$refs.cropper.getCropData(function(t){e.model=!0,e.modelSrc=t})},realTime:function(t){this.previews=t,console.log(t)},finish2:function(t){var e=this;this.$refs.cropper2.getCropData(function(t){e.model=!0,e.modelSrc=t})},finish3:function(t){var e=this;this.$refs.cropper3.getCropData(function(t){e.model=!0,e.modelSrc=t})},down:function(t){var e,i,o=this,a=document.createElement("a");a.download="demo","blob"===t?this.$refs.cropper.getCropBlob((i=v()(u.a.mark(function t(e){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:o.downImg=window.URL.createObjectURL(e),a.href=window.URL.createObjectURL(e),a.click();case 3:case"end":return t.stop()}},t,o)})),function(t){return i.apply(this,arguments)})):this.$refs.cropper.getCropData((e=v()(u.a.mark(function t(e){var i,a,n,s,r,c,p,l;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o.downImg=e,i=(new Date).getTime(),a="teacher_abc_text/image/183455/detail/base64test_"+i,t.next=5,Object(I.a)(a);case 5:return n=t.sent,console.log(n),s=n.token,r=o.downImg.replace(/^data[\S]+;base64,/,""),c=window.btoa(a.split(".").pop()),p={path:c,dataURL:r,contentType:"application/octet-stream",authorization:"UpToken "+s},t.next=13,Object(I.b)(p);case 13:l=t.sent,console.log(l);case 15:case"end":return t.stop()}},t,o)})),function(t){return e.apply(this,arguments)}))},uploadImg:function(t,e){var i=this,o=t.target.files[0];if(!/\.(gif|jpg|jpeg|png|bmp|GIF|JPG|PNG)$/.test(t.target.value))return alert("图片类型必须是.gif,jpeg,jpg,png,bmp中的一种"),!1;var a=new FileReader;a.onload=function(t){var o=void 0;o="object"===r()(t.target.result)?window.URL.createObjectURL(new Blob([t.target.result])):t.target.result,1===e?i.option.img=o:2===e&&(i.example2.img=o)},a.readAsArrayBuffer(o)},imgLoad:function(t){console.log(t)}}},$={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("div",[t._v('基于vue的图片裁剪插件-"vue-image-crop-upload"调研')]),t._v(" "),i("div",[t._v("\n        上传图片\n        "),i("input",{ref:"imgUpload",attrs:{type:"file"},on:{change:function(e){t.changeFile(e)}}})]),t._v(" "),i("div",{on:{click:t.cropButton}},[t._v("\n        裁剪图片\n    ")]),t._v(" "),i("img",{attrs:{src:t.imgAddress}}),t._v(" "),i("div",{attrs:{id:"crop2"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.model,expression:"model"}],staticClass:"model",on:{click:function(e){t.model=!1}}},[i("div",{staticClass:"model-show"},[i("img",{attrs:{src:t.modelSrc,alt:""}})])]),t._v(" "),i("p",[t._v("例子")]),t._v(" "),i("div",{staticClass:"cut"},[i("vue-cropper",{ref:"cropper",attrs:{img:t.option.img,"output-size":t.option.size,"output-type":t.option.outputType,info:!0,full:t.option.full,"can-move":t.option.canMove,"can-move-box":t.option.canMoveBox,"fixed-box":t.option.fixedBox,original:t.option.original,"auto-crop":t.option.autoCrop,"auto-crop-width":t.option.autoCropWidth,"auto-crop-height":t.option.autoCropHeight,"center-box":t.option.centerBox,high:t.option.high},on:{"real-time":t.realTime,"img-load":t.imgLoad}})],1),t._v(" "),i("div",{staticClass:"test-button"},[i("button",{staticClass:"btn",on:{click:t.changeImg}},[t._v("changeImg")]),t._v(" "),i("label",{staticClass:"btn",attrs:{for:"uploads"}},[t._v("upload")]),t._v(" "),i("input",{staticStyle:{position:"absolute",clip:"rect(0 0 0 0)"},attrs:{type:"file",id:"uploads",accept:"image/png, image/jpeg, image/gif, image/jpg"},on:{change:function(e){t.uploadImg(e,1)}}}),t._v(" "),t.crap?i("button",{staticClass:"btn",on:{click:t.stopCrop}},[t._v("stop")]):i("button",{staticClass:"btn",on:{click:t.startCrop}},[t._v("start")]),t._v(" "),i("button",{staticClass:"btn",on:{click:t.clearCrop}},[t._v("clear")]),t._v(" "),i("button",{staticClass:"btn",on:{click:t.refreshCrop}},[t._v("refresh")]),t._v(" "),i("button",{staticClass:"btn",on:{click:function(e){t.changeScale(1)}}},[t._v("+")]),t._v(" "),i("button",{staticClass:"btn",on:{click:function(e){t.changeScale(-1)}}},[t._v("-")]),t._v(" "),i("button",{staticClass:"btn",on:{click:t.rotateLeft}},[t._v("rotateLeft")]),t._v(" "),i("button",{staticClass:"btn",on:{click:t.rotateRight}},[t._v("rotateRight")]),t._v(" "),i("button",{staticClass:"btn",on:{click:function(e){t.finish("base64")}}},[t._v("preview(base64)")]),t._v(" "),i("button",{staticClass:"btn",on:{click:function(e){t.finish("blob")}}},[t._v("preview(blob)")]),t._v(" "),i("a",{staticClass:"btn",on:{click:function(e){t.down("base64")}}},[t._v("download(base64)")]),t._v(" "),i("a",{staticClass:"btn",on:{click:function(e){t.down("blob")}}},[t._v("download(blob)")]),t._v(" "),i("div",{staticStyle:{display:"block",width:"100%"}},[i("label",{staticClass:"c-item"},[i("span",[t._v("上传图片是否显示原始宽高 (针对大图 可以铺满)")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.option.original,expression:"option.original"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.option.original)?t._i(t.option.original,null)>-1:t.option.original},on:{change:function(e){var i=t.option.original,o=e.target,a=!!o.checked;if(Array.isArray(i)){var n=t._i(i,null);o.checked?n<0&&t.$set(t.option,"original",i.concat([null])):n>-1&&t.$set(t.option,"original",i.slice(0,n).concat(i.slice(n+1)))}else t.$set(t.option,"original",a)}}}),t._v(" "),i("span",[t._v("original: "+t._s(t.option.original))])]),t._v(" "),i("label",{staticClass:"c-item"},[i("span",[t._v("能否拖动图片")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.option.canMove,expression:"option.canMove"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.option.canMove)?t._i(t.option.canMove,null)>-1:t.option.canMove},on:{change:function(e){var i=t.option.canMove,o=e.target,a=!!o.checked;if(Array.isArray(i)){var n=t._i(i,null);o.checked?n<0&&t.$set(t.option,"canMove",i.concat([null])):n>-1&&t.$set(t.option,"canMove",i.slice(0,n).concat(i.slice(n+1)))}else t.$set(t.option,"canMove",a)}}})]),t._v(" "),i("label",{staticClass:"c-item"},[i("span",[t._v("能否拖动截图框")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.option.canMoveBox,expression:"option.canMoveBox"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.option.canMoveBox)?t._i(t.option.canMoveBox,null)>-1:t.option.canMoveBox},on:{change:function(e){var i=t.option.canMoveBox,o=e.target,a=!!o.checked;if(Array.isArray(i)){var n=t._i(i,null);o.checked?n<0&&t.$set(t.option,"canMoveBox",i.concat([null])):n>-1&&t.$set(t.option,"canMoveBox",i.slice(0,n).concat(i.slice(n+1)))}else t.$set(t.option,"canMoveBox",a)}}}),t._v(" "),i("span",[t._v("canMoveBox: "+t._s(t.option.canMoveBox))])]),t._v(" "),i("label",{staticClass:"c-item"},[i("span",[t._v("截图框固定大小")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.option.fixedBox,expression:"option.fixedBox"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.option.fixedBox)?t._i(t.option.fixedBox,null)>-1:t.option.fixedBox},on:{change:function(e){var i=t.option.fixedBox,o=e.target,a=!!o.checked;if(Array.isArray(i)){var n=t._i(i,null);o.checked?n<0&&t.$set(t.option,"fixedBox",i.concat([null])):n>-1&&t.$set(t.option,"fixedBox",i.slice(0,n).concat(i.slice(n+1)))}else t.$set(t.option,"fixedBox",a)}}}),t._v(" "),i("span",[t._v("fixedBox: "+t._s(t.option.fixedBox))])]),t._v(" "),i("label",{staticClass:"c-item"},[i("span",[t._v("是否输出原图比例的截图")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.option.full,expression:"option.full"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.option.full)?t._i(t.option.full,null)>-1:t.option.full},on:{change:function(e){var i=t.option.full,o=e.target,a=!!o.checked;if(Array.isArray(i)){var n=t._i(i,null);o.checked?n<0&&t.$set(t.option,"full",i.concat([null])):n>-1&&t.$set(t.option,"full",i.slice(0,n).concat(i.slice(n+1)))}else t.$set(t.option,"full",a)}}}),t._v(" "),i("span",[t._v("full: "+t._s(t.option.full))])]),t._v(" "),i("label",{staticClass:"c-item"},[i("span",[t._v("是否自动生成截图框")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.option.autoCrop,expression:"option.autoCrop"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.option.autoCrop)?t._i(t.option.autoCrop,null)>-1:t.option.autoCrop},on:{change:function(e){var i=t.option.autoCrop,o=e.target,a=!!o.checked;if(Array.isArray(i)){var n=t._i(i,null);o.checked?n<0&&t.$set(t.option,"autoCrop",i.concat([null])):n>-1&&t.$set(t.option,"autoCrop",i.slice(0,n).concat(i.slice(n+1)))}else t.$set(t.option,"autoCrop",a)}}}),t._v(" "),i("span",[t._v("autoCrop: "+t._s(t.option.autoCrop))])]),t._v(" "),i("label",{staticClass:"c-item"},[i("span",[t._v("是否根据dpr生成适合屏幕的高清图片")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.option.high,expression:"option.high"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.option.high)?t._i(t.option.high,null)>-1:t.option.high},on:{change:function(e){var i=t.option.high,o=e.target,a=!!o.checked;if(Array.isArray(i)){var n=t._i(i,null);o.checked?n<0&&t.$set(t.option,"high",i.concat([null])):n>-1&&t.$set(t.option,"high",i.slice(0,n).concat(i.slice(n+1)))}else t.$set(t.option,"high",a)}}}),t._v(" "),i("span",[t._v("high: "+t._s(t.option.high))])]),t._v(" "),i("label",{staticClass:"c-item"},[i("span",[t._v("截图框是否限制在图片里(只有在自动生成截图框时才能生效)")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.option.centerBox,expression:"option.centerBox"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.option.centerBox)?t._i(t.option.centerBox,null)>-1:t.option.centerBox},on:{change:function(e){var i=t.option.centerBox,o=e.target,a=!!o.checked;if(Array.isArray(i)){var n=t._i(i,null);o.checked?n<0&&t.$set(t.option,"centerBox",i.concat([null])):n>-1&&t.$set(t.option,"centerBox",i.slice(0,n).concat(i.slice(n+1)))}else t.$set(t.option,"centerBox",a)}}}),t._v(" "),i("span",[t._v("centerBox: "+t._s(t.option.centerBox))])]),t._v(" "),i("label",{staticClass:"c-item"},[i("p",[t._v("输出图片格式")]),t._v(" "),i("label",[t._v("jpg\n                        "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.option.outputType,expression:"option.outputType"}],attrs:{type:"radio",name:"type",value:"jpeg"},domProps:{checked:t._q(t.option.outputType,"jpeg")},on:{change:function(e){t.$set(t.option,"outputType","jpeg")}}})]),t._v(" "),i("label",[t._v("png\n                        "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.option.outputType,expression:"option.outputType"}],attrs:{type:"radio",name:"type",value:"png"},domProps:{checked:t._q(t.option.outputType,"png")},on:{change:function(e){t.$set(t.option,"outputType","png")}}})]),t._v(" "),i("label",[t._v("webp\n                        "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.option.outputType,expression:"option.outputType"}],attrs:{type:"radio",name:"type",value:"webp"},domProps:{checked:t._q(t.option.outputType,"webp")},on:{change:function(e){t.$set(t.option,"outputType","webp")}}})])])])]),t._v(" "),i("div",{staticClass:"show-preview",style:{width:t.previews.w+"px",height:t.previews.h+"px",overflow:"hidden",margin:"5px"}},[i("div",{style:t.previews.div},[i("img",{style:t.previews.img,attrs:{src:t.previews.url}})])])])])},staticRenderFns:[]};var A=i("C7Lr")(M,$,!1,function(t){i("RJaQ")},"data-v-8c266d2c",null).exports;n.default.use(a.a),n.default.config.productionTip=!1,new n.default({el:"#app",components:{App:A},template:"<App/>"})},"5OHe":function(t,e){},L8d8:function(t,e,i){"use strict";var o=i("rVsN"),a=i.n(o),n=i("aozt"),s=i.n(n);i("9k1S");e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",e={};return(e=s.a.create({baseURL:t,timeout:1e4})).interceptors.request.use(function(t){return t},function(t){return a.a.reject(t)}),e.interceptors.response.use(function(t){return t.data},function(t){var e=t;return a.a.reject(e)}),e},i.d(e,"b",function(){return r});var r=function(t){var e=new FormData;for(var i in t)e.append(i,t[i]);return e}},OPLz:function(t,e){},RJaQ:function(t,e){},s9Ai:function(t,e,i){"use strict";e.a=function(t){return c.get("/uploader-dev-9098/api/v1/qiniu/upload/token?"+t)},e.b=function(t){var e="http://upload.qiniu.com/putb64/-1/key/"+t.path,i={};return(i=r.a.create({timeout:1e4,headers:{"Content-Type":t.contentType,Authorization:t.authorization}})).interceptors.request.use(function(t){return t},function(t){return a.a.reject(t)}),i.interceptors.response.use(function(t){return t.data},function(t){var e=t;return a.a.reject(e)}),i.post(e,t.dataURL)};var o=i("rVsN"),a=i.n(o),n=i("L8d8"),s=i("aozt"),r=i.n(s),c=Object(n.a)("http://gateway-dev.sayabc.com:8000")}},["1oKP"]);
//# sourceMappingURL=cropper.c3174613160a0cd34d62.js.map